---
import { Image } from 'astro:assets';
import LanguageSelector from '../components/LanguageSelector.astro';
import { getLangFromUrl, useTranslations } from '../i18n';

export interface Props {
	title: string;
	description?: string;
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const { title, description = "Sentiero dei Sette Santi - Percorso escursionistico tra natura e spiritualit√†" } = Astro.props;
---

<!doctype html>
<html lang={lang}>
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/images/logo.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		
		<!-- Preload fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	</head>
	<body class="font-trail bg-gray-50 min-h-screen flex flex-col">
		<header class="bg-trail-green text-white shadow-lg">
			<nav class="container mx-auto pl-2 pr-4 py-4">
				<div class="flex justify-between items-center">
					<a href="/" class="flex items-center gap-3 text-2xl font-bold text-trail-gold">
						<Image
							src="/images/logo.svg"
							alt="Logo Sentiero dei Sette Santi"
							width={56}
							height={56}
							class="h-14 w-auto"
							loading="eager"
							decoding="async"
						/>
					</a>
					<div class="hidden md:flex items-center space-x-6">
						<a href="/" class="hover:text-trail-gold transition-colors">{t('nav.home')}</a>
						<a href="/#trails" class="hover:text-trail-gold transition-colors">{t('nav.trails')}</a>
						<a href="/#saints" class="hover:text-trail-gold transition-colors">{t('nav.saints')}</a>
						<a href="/blog" class="hover:text-trail-gold transition-colors">{t('nav.blog')}</a>
						<a href="/community" class="hover:text-trail-gold transition-colors">{t('nav.community')}</a>
						<a href="/#booking" class="hover:text-trail-gold transition-colors">{t('nav.booking')}</a>
						<LanguageSelector />
					</div>
					<button id="mobile-menu-button" class="md:hidden text-white hover:text-trail-gold">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
						</svg>
					</button>
				</div>
				<!-- Mobile Menu -->
				<div id="mobile-menu" class="hidden md:hidden mt-4 pb-4">
					<div class="flex flex-col space-y-3">
						<a href="/" class="hover:text-trail-gold transition-colors py-2">{t('nav.home')}</a>
						<a href="/#trails" class="hover:text-trail-gold transition-colors py-2">{t('nav.trails')}</a>
						<a href="/#saints" class="hover:text-trail-gold transition-colors py-2">{t('nav.saints')}</a>
						<a href="/blog" class="hover:text-trail-gold transition-colors py-2">{t('nav.blog')}</a>
						<a href="/community" class="hover:text-trail-gold transition-colors py-2">{t('nav.community')}</a>
						<a href="/#booking" class="hover:text-trail-gold transition-colors py-2">{t('nav.booking')}</a>
						<div class="pt-2 border-t border-trail-gold/30">
							<LanguageSelector />
						</div>
					</div>
				</div>
			</nav>
		</header>
		
		<main class="flex-1">
			<slot />
		</main>
		
		<footer class="bg-trail-brown text-white mt-12">
			<div class="container mx-auto px-4 py-8">
				<div class="grid md:grid-cols-3 gap-8">
					<div>
						<div class="flex items-center gap-2 mb-4">
							<Image
								src="/images/logo.svg"
								alt="Logo Sentiero dei Sette Santi"
								width={32}
								height={32}
								class="h-8 w-8"
								loading="lazy"
								decoding="async"
							/>
							<h3 class="text-lg font-semibold">Sentiero dei Sette Santi</h3>
						</div>
						<p class="text-gray-300">Un percorso spirituale e naturalistico attraverso la bellezza dell'Italia.</p>
					</div>
					<div>
						<h3 class="text-lg font-semibold mb-4">Contatti</h3>
						<p class="text-gray-300">info@settesanti.it</p>
						<p class="text-gray-300">+39 123 456 7890</p>
					</div>
					<div>
						<h3 class="text-lg font-semibold mb-4">Seguici</h3>
						<div class="flex space-x-4">
							<a href="#" class="text-gray-300 hover:text-white transition-colors">Facebook</a>
							<a href="#" class="text-gray-300 hover:text-white transition-colors">Instagram</a>
						</div>
					</div>
				</div>
				<div class="border-t border-gray-600 mt-8 pt-8 text-center text-gray-400">
					<p>&copy; 2024 Sentiero dei Sette Santi. Tutti i diritti riservati.</p>
				</div>
			</div>
		</footer>

		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const mobileMenuButton = document.getElementById('mobile-menu-button');
				const mobileMenu = document.getElementById('mobile-menu');
				
				if (mobileMenuButton && mobileMenu) {
					mobileMenuButton.addEventListener('click', () => {
						mobileMenu.classList.toggle('hidden');
					});
				}
			});
		</script>
	</body>
</html>